var he=Object.defineProperty;var be=(e,t,a)=>t in e?he(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var X=(e,t,a)=>(be(e,typeof t!="symbol"?t+"":t,a),a);import{q as P,s as J,t as Ve,u as R,v as ye,x as Y,y as b,z as W,d as C,a as n,F as K,A as B,B as Q,C as Z,D as ee,E as we,G as pe,H as ke,I as _e,J as Se,K as z,L as Te,M as Ce,N as te,O as Ie,P as oe,Q as ae,R as $e,S as xe,T as Be,U as Pe,W as Re,X as A,Y as We,Z as Ee,$ as Ue,a0 as Me,a1 as I,a2 as Xe,a3 as Ye,_ as He,o as se,c as ne,w as v,a4 as je,i as ze,b as k,m as Ae,a5 as j,n as D,p as Ne,a6 as Ge}from"./index-a1344df0.js";import{f as Le,a as Oe,s as De,u as Fe,V as F,b as qe,c as E}from"./VTextField-a51d04a5.js";import{m as Je,u as Ke}from"./lazy-cc59aaa1.js";import{m as Qe,V as q}from"./VSlideGroup-10812bc2.js";import"./index-9f9beae4.js";class U{}X(U,"login",async t=>{try{const a=await fetch("http://localhost:8080/auth/login",{method:"post",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});let o=await a.json();return a.status===404?{err:"Неправильное имя пользователя или пароль"}:(localStorage.setItem("jwt",o.token),localStorage.setItem("email",t.email),localStorage.setItem("email",t.email),o)}catch(a){console.error(a)}}),X(U,"signup",async t=>{try{const a=await fetch("http://localhost:8080/auth/signup",{method:"post",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});let o=await a.json();return a.status===409?{err:"Пользователь с таким логином уже существует"}:(localStorage.setItem("jwt",o.token),localStorage.setItem("email",t.email),o)}catch(a){console.error(a)}}),X(U,"logout",async()=>{localStorage.removeItem("user")});const L=Symbol.for("vuetify:v-tabs"),Ze=P({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...J(Ve({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),N=R()({name:"VTab",props:Ze(),setup(e,t){let{slots:a,attrs:o}=t;const{textColorClasses:l,textColorStyles:i}=ye(e,"sliderColor"),s=Y(),g=Y(),d=b(()=>e.direction==="horizontal"),h=b(()=>{var V,u;return((u=(V=s.value)==null?void 0:V.group)==null?void 0:u.isSelected.value)??!1});function _(V){var c,r;let{value:u}=V;if(u){const y=(r=(c=s.value)==null?void 0:c.$el.parentElement)==null?void 0:r.querySelector(".v-tab--selected .v-tab__slider"),$=g.value;if(!y||!$)return;const M=getComputedStyle(y).color,S=y.getBoundingClientRect(),T=$.getBoundingClientRect(),f=d.value?"x":"y",m=d.value?"X":"Y",w=d.value?"right":"bottom",p=d.value?"width":"height",ce=S[f],fe=T[f],x=ce>fe?S[w]-T[w]:S[f]-T[f],ge=Math.sign(x)>0?d.value?"right":"bottom":Math.sign(x)<0?d.value?"left":"top":"center",ve=(Math.abs(x)+(Math.sign(x)<0?S[p]:T[p]))/Math.max(S[p],T[p])||0,me=S[p]/T[p]||0,O=1.5;Oe($,{backgroundColor:[M,"currentcolor"],transform:[`translate${m}(${x}px) scale${m}(${me})`,`translate${m}(${x/O}px) scale${m}(${(ve-1)/O+1})`,"none"],transformOrigin:Array(3).fill(ge)},{duration:225,easing:De})}}return W(()=>{const V=C.filterProps(e);return n(C,B({symbol:L,ref:s,class:["v-tab",e.class],style:e.style,tabindex:h.value?0:-1,role:"tab","aria-selected":String(h.value),active:!1},V,o,{block:e.fixed,maxWidth:e.fixed?300:void 0,"onGroup:selected":_}),{...a,default:()=>{var u;return n(K,null,[((u=a.default)==null?void 0:u.call(a))??e.text,!e.hideSlider&&n("div",{ref:g,class:["v-tab__slider",l.value],style:i.value},null)])}})}),Le({},s)}});const et=e=>{const{touchstartX:t,touchendX:a,touchstartY:o,touchendY:l}=e,i=.5,s=16;e.offsetX=a-t,e.offsetY=l-o,Math.abs(e.offsetY)<i*Math.abs(e.offsetX)&&(e.left&&a<t-s&&e.left(e),e.right&&a>t+s&&e.right(e)),Math.abs(e.offsetX)<i*Math.abs(e.offsetY)&&(e.up&&l<o-s&&e.up(e),e.down&&l>o+s&&e.down(e))};function tt(e,t){var o;const a=e.changedTouches[0];t.touchstartX=a.clientX,t.touchstartY=a.clientY,(o=t.start)==null||o.call(t,{originalEvent:e,...t})}function ot(e,t){var o;const a=e.changedTouches[0];t.touchendX=a.clientX,t.touchendY=a.clientY,(o=t.end)==null||o.call(t,{originalEvent:e,...t}),et(t)}function at(e,t){var o;const a=e.changedTouches[0];t.touchmoveX=a.clientX,t.touchmoveY=a.clientY,(o=t.move)==null||o.call(t,{originalEvent:e,...t})}function st(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:e.left,right:e.right,up:e.up,down:e.down,start:e.start,move:e.move,end:e.end};return{touchstart:a=>tt(a,t),touchend:a=>ot(a,t),touchmove:a=>at(a,t)}}function nt(e,t){var g;const a=t.value,o=a!=null&&a.parent?e.parentElement:e,l=(a==null?void 0:a.options)??{passive:!0},i=(g=t.instance)==null?void 0:g.$.uid;if(!o||!i)return;const s=st(t.value);o._touchHandlers=o._touchHandlers??Object.create(null),o._touchHandlers[i]=s,Q(s).forEach(d=>{o.addEventListener(d,s[d],l)})}function lt(e,t){var i,s;const a=(i=t.value)!=null&&i.parent?e.parentElement:e,o=(s=t.instance)==null?void 0:s.$.uid;if(!(a!=null&&a._touchHandlers)||!o)return;const l=a._touchHandlers[o];Q(l).forEach(g=>{a.removeEventListener(g,l[g])}),delete a._touchHandlers[o]}const le={mounted:nt,unmounted:lt},it=le,ie=Symbol.for("vuetify:v-window"),ue=Symbol.for("vuetify:v-window-group"),re=P({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||e==="hover"},touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},...Z(),...ee(),...we()},"VWindow"),G=R()({name:"VWindow",directives:{Touch:le},props:re(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:a}=t;const{themeClasses:o}=pe(e),{isRtl:l}=ke(),{t:i}=_e(),s=Se(e,ue),g=Y(),d=b(()=>l.value?!e.reverse:e.reverse),h=z(!1),_=b(()=>{const f=e.direction==="vertical"?"y":"x",w=(d.value?!h.value:h.value)?"-reverse":"";return`v-window-${f}${w}-transition`}),V=z(0),u=Y(void 0),c=b(()=>s.items.value.findIndex(f=>s.selected.value.includes(f.id)));Te(c,(f,m)=>{const w=s.items.value.length,p=w-1;w<=2?h.value=f<m:f===p&&m===0?h.value=!0:f===0&&m===p?h.value=!1:h.value=f<m}),Ce(ie,{transition:_,isReversed:h,transitionCount:V,transitionHeight:u,rootRef:g});const r=b(()=>e.continuous||c.value!==0),y=b(()=>e.continuous||c.value!==s.items.value.length-1);function $(){r.value&&s.prev()}function M(){y.value&&s.next()}const S=b(()=>{const f=[],m={icon:l.value?e.nextIcon:e.prevIcon,class:`v-window__${d.value?"right":"left"}`,onClick:s.prev,"aria-label":i("$vuetify.carousel.prev")};f.push(r.value?a.prev?a.prev({props:m}):n(C,m,null):n("div",null,null));const w={icon:l.value?e.prevIcon:e.nextIcon,class:`v-window__${d.value?"left":"right"}`,onClick:s.next,"aria-label":i("$vuetify.carousel.next")};return f.push(y.value?a.next?a.next({props:w}):n(C,w,null):n("div",null,null)),f}),T=b(()=>e.touch===!1?e.touch:{...{left:()=>{d.value?$():M()},right:()=>{d.value?M():$()},start:m=>{let{originalEvent:w}=m;w.stopPropagation()}},...e.touch===!0?{}:e.touch});return W(()=>te(n(e.tag,{ref:g,class:["v-window",{"v-window--show-arrows-on-hover":e.showArrows==="hover"},o.value,e.class],style:e.style},{default:()=>{var f,m;return[n("div",{class:"v-window__container",style:{height:u.value}},[(f=a.default)==null?void 0:f.call(a,{group:s}),e.showArrows!==!1&&n("div",{class:"v-window__controls"},[S.value])]),(m=a.additional)==null?void 0:m.call(a,{group:s})]}}),[[Ie("touch"),T.value]])),{group:s}}}),ut=P({...J(re(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VTabsWindow"),rt=R()({name:"VTabsWindow",props:ut(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:a}=t;const o=oe(L,null),l=ae(e,"modelValue"),i=b({get(){var s;return l.value!=null||!o?l.value:(s=o.items.value.find(g=>o.selected.value.includes(g.id)))==null?void 0:s.value},set(s){l.value=s}});return W(()=>{const s=G.filterProps(e);return n(G,B({_as:"VTabsWindow"},s,{modelValue:i.value,"onUpdate:modelValue":g=>i.value=g,class:["v-tabs-window",e.class],style:e.style,mandatory:!1,touch:!1}),a)}),{}}}),de=P({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...Z(),...$e(),...Je()},"VWindowItem"),H=R()({name:"VWindowItem",directives:{Touch:it},props:de(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:a}=t;const o=oe(ie),l=xe(e,ue),{isBooted:i}=Be();if(!o||!l)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const s=z(!1),g=b(()=>i.value&&(o.isReversed.value?e.reverseTransition!==!1:e.transition!==!1));function d(){!s.value||!o||(s.value=!1,o.transitionCount.value>0&&(o.transitionCount.value-=1,o.transitionCount.value===0&&(o.transitionHeight.value=void 0)))}function h(){var r;s.value||!o||(s.value=!0,o.transitionCount.value===0&&(o.transitionHeight.value=A((r=o.rootRef.value)==null?void 0:r.clientHeight)),o.transitionCount.value+=1)}function _(){d()}function V(r){s.value&&We(()=>{!g.value||!s.value||!o||(o.transitionHeight.value=A(r.clientHeight))})}const u=b(()=>{const r=o.isReversed.value?e.reverseTransition:e.transition;return g.value?{name:typeof r!="string"?o.transition.value:r,onBeforeEnter:h,onAfterEnter:d,onEnterCancelled:_,onBeforeLeave:h,onAfterLeave:d,onLeaveCancelled:_,onEnter:V}:!1}),{hasContent:c}=Ke(e,l.isSelected);return W(()=>n(Re,{transition:u.value,disabled:!i.value},{default:()=>{var r;return[te(n("div",{class:["v-window-item",l.selectedClass.value,e.class],style:e.style},[c.value&&((r=a.default)==null?void 0:r.call(a))]),[[Pe,l.isSelected.value]])]}})),{groupItem:l}}}),dt=P({...de()},"VTabsWindowItem"),ct=R()({name:"VTabsWindowItem",props:dt(),setup(e,t){let{slots:a}=t;return W(()=>{const o=H.filterProps(e);return n(H,B({_as:"VTabsWindowItem"},o,{class:["v-tabs-window-item",e.class],style:e.style}),a)}),{}}});function ft(e){return e?e.map(t=>Ye(t)?t:{text:t,value:t}):[]}const gt=P({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...Qe({mandatory:"force",selectedClass:"v-tab-item--selected"}),...Ee(),...ee()},"VTabs"),vt=R()({name:"VTabs",props:gt(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:a,slots:o}=t;const l=ae(e,"modelValue"),i=b(()=>ft(e.items)),{densityClasses:s}=Ue(e),{backgroundColorClasses:g,backgroundColorStyles:d}=Me(I(e,"bgColor")),{scopeId:h}=Fe();return Xe({VTab:{color:I(e,"color"),direction:I(e,"direction"),stacked:I(e,"stacked"),fixed:I(e,"fixedTabs"),sliderColor:I(e,"sliderColor"),hideSlider:I(e,"hideSlider")}}),W(()=>{const _=q.filterProps(e),V=!!(o.window||e.items.length>0);return n(K,null,[n(q,B(_,{modelValue:l.value,"onUpdate:modelValue":u=>l.value=u,class:["v-tabs",`v-tabs--${e.direction}`,`v-tabs--align-tabs-${e.alignTabs}`,{"v-tabs--fixed-tabs":e.fixedTabs,"v-tabs--grow":e.grow,"v-tabs--stacked":e.stacked},s.value,g.value,e.class],style:[{"--v-tabs-height":A(e.height)},d.value,e.style],role:"tablist",symbol:L},h,a),{default:()=>{var u;return[((u=o.default)==null?void 0:u.call(o))??i.value.map(c=>{var r;return((r=o.tab)==null?void 0:r.call(o,{item:c}))??n(N,B(c,{key:c.text,value:c.value}),{default:o[`tab.${c.value}`]?()=>{var y;return(y=o[`tab.${c.value}`])==null?void 0:y.call(o,{item:c})}:void 0})})]}}),V&&n(rt,B({modelValue:l.value,"onUpdate:modelValue":u=>l.value=u,key:"tabs-window"},h),{default:()=>{var u;return[i.value.map(c=>{var r;return((r=o.item)==null?void 0:r.call(o,{item:c}))??n(ct,{value:c.value},{default:()=>{var y;return(y=o[`item.${c.value}`])==null?void 0:y.call(o,{item:c})}})}),(u=o.window)==null?void 0:u.call(o)]}})])}),{}}}),mt={data:()=>({roleId:1,toggle:null,login_tab:null,login_snackbar:!1,login_snackbarMessage:"",login_valid:!0,login_login:"",login_password:"",login_loginRules:[e=>!!e||"Обязательное поле",e=>(e||"").length>=5||"Минимум 5 символов",e=>(e||"").length<=30||"Максимум 30 символов"],login_passRules:[e=>!!e||"Обязательное поле.",e=>(e||"").length>=5||"Минимум 5 символов",e=>(e||"").length<=30||"Максимум 30 символов"],signup_valid:!0,signup_login:"",signup_lastName:"",signup_firstName:"",signup_password:"",signup_checkpass:"",signup_snackbar:!1,signup_snackbarMessage:"",rules:{required:e=>!!e||"Поле обязательно для заполнения"},signup_loginRules:[e=>!!e||"Обязательное поле",e=>(e||"").length>=5||"Минимум 5 символов",e=>(e||"").length<=40||"Максимум 40 символов"],signup_passRules:[e=>!!e||"Обязательное поле",e=>(e||"").length<=40||"Максимум 40 символов",e=>(e||"").length>=5||"Минимум 5 символов"],signup_passSecRules:[e=>!!e||"Обязательное поле",e=>(e||"").length<=40||"Максимум 40 символов",e=>(e||"").length>=5||"Минимум 5 символов"]}),methods:{async loginUser(){if(this.$refs.form.validate()){let e={email:this.login_login,password:this.login_password,roleId:this.roleId},t=await U.login(e);t.err?(this.login_snackbar=!0,this.login_snackbarMessage=t.err):localStorage.getItem("jwt")!=null&&(this.$route.params.nextUrl!=null?this.$router.push(this.$route.params.nextUrl):localStorage.getItem("email")=="admin"?this.$router.push("/admin"):this.$router.push("/vacancies"))}},async registerUser(){if(this.signup_password===this.signup_checkpass)console.log(!0);else return this.signup_snackbar=!0,this.signup_snackbarMessage="Пароли не совпадают",!1;if(this.$refs.form.validate()){let e={firstName:this.signup_firstName,lastName:this.signup_firstName,email:this.signup_login,password:this.signup_password,roleId:this.roleId},t=await U.signup(e);t.err?(this.signup_snackbar=!0,this.signup_snackbarMessage=t.err):localStorage.getItem("jwt")!=null&&(this.$route.params.nextUrl!=null?this.$router.push(this.$route.params.nextUrl):this.$router.push("/vacancies"))}}}},ht={class:"d-flex align-center flex-column bg-grey-lighten-4 pa-6"};function bt(e,t,a,o,l,i){return se(),ne(D,{class:"fill-height"},{default:v(()=>[n(je,{class:"align-center text-center fill-height"},{default:v(()=>[n(ze,{class:"mx-auto","max-width":"450"},{default:v(()=>[n(vt,{modelValue:e.login_tab,"onUpdate:modelValue":t[0]||(t[0]=s=>e.login_tab=s),"bg-color":"primary"},{default:v(()=>[n(N,{value:"one"},{default:v(()=>[k("Вход")]),_:1}),n(N,{value:"two"},{default:v(()=>[k("Регистрация")]),_:1})]),_:1},8,["modelValue"]),n(Ae,null,{default:v(()=>[n(G,{modelValue:e.login_tab,"onUpdate:modelValue":t[12]||(t[12]=s=>e.login_tab=s)},{default:v(()=>[n(H,{value:"one"},{default:v(()=>[n(F,{modelValue:e.login_snackbar,"onUpdate:modelValue":t[1]||(t[1]=s=>e.login_snackbar=s)},{default:v(()=>[k(j(e.login_snackbarMessage),1)]),_:1},8,["modelValue"]),n(qe,{ref:"form",modelValue:e.login_valid,"onUpdate:modelValue":t[4]||(t[4]=s=>e.login_valid=s),"lazy-validation":"",autocomplete:"on"},{default:v(()=>[n(D,null,{default:v(()=>[n(E,{modelValue:e.login_login,"onUpdate:modelValue":t[2]||(t[2]=s=>e.login_login=s),autocapitalize:"off",autocorrect:"off",autocomplete:"username",label:"Укажите Логин",placeholder:"Укажите Логин",type:"text",rules:e.loginRules,solo:"",dense:"",elebation:"5"},null,8,["modelValue","rules"]),n(E,{modelValue:e.login_password,"onUpdate:modelValue":t[3]||(t[3]=s=>e.login_password=s),autocomplete:"current-password",label:"Введите пароль",placeholder:"Введите пароль",type:"password",rules:e.login_passRules,solo:"",dense:""},null,8,["modelValue","rules"])]),_:1})]),_:1},8,["modelValue"]),n(C,{block:"",large:"",color:"success",onClick:i.loginUser},{default:v(()=>[k("Войти")]),_:1},8,["onClick"])]),_:1}),n(H,{value:"two"},{default:v(()=>[n(F,{modelValue:e.signup_snackbar,"onUpdate:modelValue":t[5]||(t[5]=s=>e.signup_snackbar=s)},{default:v(()=>[k(j(e.signup_snackbarMessage),1)]),_:1},8,["modelValue"]),n(E,{modelValue:e.signup_login,"onUpdate:modelValue":t[6]||(t[6]=s=>e.signup_login=s),autocapitalize:"off",autocorrect:"off",autocomplete:"username",label:"Укажите Логин",placeholder:"Укажите Логин",rules:e.signup_loginRules,solo:"",dense:"",elebation:"5"},null,8,["modelValue","rules"]),n(E,{modelValue:e.signup_password,"onUpdate:modelValue":t[7]||(t[7]=s=>e.signup_password=s),autocomplete:"current-password",label:"Введите пароль",placeholder:"Введите пароль",type:"password",rules:e.signup_passRules,solo:"",dense:""},null,8,["modelValue","rules"]),n(E,{modelValue:e.signup_checkpass,"onUpdate:modelValue":t[8]||(t[8]=s=>e.signup_checkpass=s),autocomplete:"check-pass",label:"Повторите пароль",placeholder:"Повторите пароль",type:"password",rules:e.signup_passSecRules,solo:"",dense:""},null,8,["modelValue","rules"]),Ne("div",ht,[n(Ge,{modelValue:e.toggle,"onUpdate:modelValue":t[11]||(t[11]=s=>e.toggle=s),color:"primary",variant:"tonal"},{default:v(()=>[n(C,{style:{width:"190px"},active:"",onClick:t[9]||(t[9]=s=>this.roleId=1)},{default:v(()=>[k("Поиск работы")]),_:1}),n(C,{style:{width:"190px"},onClick:t[10]||(t[10]=s=>this.roleId=2)},{default:v(()=>[k("Ищу сотрудников")]),_:1})]),_:1},8,["modelValue"]),k(" "+j(e.roleId),1)]),n(C,{block:"",large:"",color:"success",onClick:i.registerUser},{default:v(()=>[k("Продолжить")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}const Vt=He(mt,[["render",bt]]),Ct={__name:"Signup",setup(e){return(t,a)=>(se(),ne(Vt))}};export{Ct as default};
