import{A as m}from"./advert.service-7a9bf382.js";import{_ as g,o as u,c as f,w as a,n as p,a as s,p as t,d,g as v,a8 as b,a9 as w,F as y,b as i,a5 as l,a4 as x,h as V,i as k,bD as C}from"./index-a1344df0.js";import{V as A,a as P}from"./VFooter-ebf9f8a1.js";import{V as I,a as S}from"./VTable-8d08e502.js";import"./index-9f9beae4.js";import"./filter-e86975f2.js";const B={data:()=>({my_adverts:[],itemsPerPage:4,dialog:!1}),methods:{async loadMyAdverts(){let r={email:localStorage.getItem("email")},n=await m.allAdverts(r);n.err?console.log("Empty my_adverts list"):this.my_adverts=n.reverse()},onClickSeeAll(){this.itemsPerPage=this.itemsPerPage===4?this.my_adverts.length:4},async deleteItem(r){this.dialog=!1;let n=await m.deleteAdvert(r);console.log(n),await this.loadMyAdverts()}},beforeCreate(){localStorage.getItem("jwt")==null&&this.$router.push("/")},async created(){await this.loadMyAdverts()}},$={class:"text-h4 font-weight-bold d-flex justify-space-between mb-4 align-center"},j=t("div",{class:"text-truncate"},null,-1),M={class:"d-flex align-center"},D=t("span",{class:"text-decoration-underline text-none"},"Показать все",-1),E={class:"d-inline-flex"},F={align:"right"},N={class:"text-subtitle-2"},z=t("br",null,null,-1),R=t("br",null,null,-1),T=t("br",null,null,-1),L=t("th",null,null,-1);function q(r,n,G,H,J,_){return u(),f(p,{class:"fill-height"},{default:a(()=>[s(x,{class:"text-center fill-height"},{default:a(()=>[s(A,{items:r.my_adverts,"items-per-page":r.itemsPerPage},{header:a(({page:o,pageCount:e,prevPage:c,nextPage:h})=>[t("h1",$,[j,t("div",M,[s(d,{class:"me-8",variant:"text",onClick:_.onClickSeeAll},{default:a(()=>[D]),_:1},8,["onClick"]),t("div",E,[s(d,{disabled:o===1,icon:"mdi-arrow-left",size:"small",variant:"tonal",class:"me-2",onClick:c},null,8,["disabled","onClick"]),s(d,{disabled:o===e,icon:"mdi-arrow-right",size:"small",variant:"tonal",onClick:h},null,8,["disabled","onClick"])])])])]),default:a(({items:o})=>[s(v,null,{default:a(()=>[(u(!0),b(y,null,w(o,(e,c)=>(u(),f(V,{key:c,cols:"12",sm:"6",xl:"3",href:"https://github.com/vuetifyjs/vuetify/"},{default:a(()=>[s(I,{border:""},{default:a(()=>[s(k,null,{default:a(()=>[s(C,{gradient:"to top right, rgba(255, 255, 255, .1), rgba(14, 151, 210, .15)",src:e.raw.image,cover:"",height:"350"},null,8,["gradient","src"]),s(S,{density:"compact",class:"text-caption"},{default:a(()=>[t("tbody",null,[t("tr",F,[t("th",null,[t("p",N,l(e.raw.brand)+" "+l(e.raw.model),1),i(" Стоимость : "+l(e.raw.price)+" ("+l(Math.round(e.raw.price/3.3))+")$",1),z,i(" Цвет: "+l(e.raw.color),1),R,i(" "+l(e.raw.age)+", "+l(e.raw.mile_age)+" км, "+l(e.raw.body_type),1),T,i(l(e.raw.date)+" ",1),L])])])]),_:2},1024),s(d,{block:"",variant:"text",onClick:h=>_.deleteItem(e.raw._id)},{default:a(()=>[i("Удалить")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),footer:a(({page:o,pageCount:e})=>[s(P,{color:"surface-variant",class:"justify-space-between text-body-2 mt-4"},{default:a(()=>[i(" Всего объявлений: "+l(r.my_adverts.length)+" ",1),t("div",null," Страница "+l(o)+" из "+l(e),1)]),_:2},1024)]),_:1},8,["items","items-per-page"])]),_:1})]),_:1})}const Y=g(B,[["render",q]]);export{Y as default};
