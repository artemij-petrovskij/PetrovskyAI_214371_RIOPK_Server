import{V as f}from"./vacancy.service-906fc0e3.js";import{_ as h,x as u,o as y,c as b,w as s,n as c,a as l,a8 as v,i as I,af as S,b as d,a5 as V,d as g,aa as q}from"./index-a1344df0.js";import{V as w}from"./index-9f9beae4.js";import{b as k,c as p,V as C}from"./VTextField-a51d04a5.js";import{V as n}from"./VAutocomplete-58e98279.js";import"./lazy-cc59aaa1.js";import"./VList-9ab19358.js";import"./VListItem-365efae1.js";import"./VDivider-3035ff69.js";import"./VSlideGroup-10812bc2.js";import"./filter-e86975f2.js";const U={data:()=>({categoryId:1,companyId:1,step:u(1),items:u(["Выберите компанию","Выберите категорию","C"]),textInput:u(),categories:[],companies:[],category:"",company:"",company_name:"",company_description:"",title:"",description:"",salary:"",description:"",salary:"",requirements:"",location:"",types:["Товарно-транспортная накладная","Товарный раздел","Приходный кассовый ордер","Расходный кассовый ордер","Акт о приеме-передаче основных средств","Акт о приеме-передаче нематериальных активов"],show:!1,valid:!1,valid2:!1,step:1,validStep1:!1,validStep2:!1,rules:{required:e=>!!e||"Поле обязательно для заполнения"},snackbar:!1,snackbarMessage:""}),methods:{validate(){this.textInput!="x"&&this.step--},submitForm(){this.valid&&this.createAdv()},async getCategoryId(e){const r=this.categories.find(i=>i.title==this.category);this.categoryId=r.id},async getCompanyId(e){const r=this.companies.find(i=>i.title==this.company);this.companyId=r.id},async loadMyAdverts(){let e={email:localStorage.getItem("email")},a=await f.allVacancies(e);if(a.err)console.log("Empty my_adverts list");else{const r=a.categories.map(o=>({title:o.name,id:o.id}));this.categories=r;const i=a.companies.map(o=>({title:o.name,id:o.id}));this.companies=i,setTimeout(()=>{this.show=!0},300),console.log(i)}},async createAdv(){if(this.title!=null&&this.description!=null){let e={title:this.title,description:this.description,categoryId:this.categoryId,companyId:this.companyId,description:this.description,salary:this.salary,requirements:this.requirements,location:this.location,jwt:localStorage.getItem("jwt"),creator:localStorage.getItem("email"),modifeir:localStorage.getItem("email"),email:localStorage.getItem("email")},a=await f.createVacancy(e);a.err?(this.snackbar=!0,this.snackbarMessage=a.err):localStorage.getItem("jwt")!=null&&(this.$route.params.nextUrl!=null?this.$router.push(this.$route.params.nextUrl):this.$router.push("/vacancies"))}}},beforeCreate(){localStorage.getItem("jwt")==null&&this.$router.push("/")},nextStep(){this.step===1?(this.$refs.formStep1.validate(),this.validStep1&&this.step++):this.step===2&&(this.$refs.formStep2.validate(),this.validStep2&&this.step++)},prevStep(){this.step--},async created(){await this.loadMyAdverts()}},$={key:0,class:"my-box"};function M(e,a,r,i,o,m){return y(),b(c,null,{default:s(()=>[l(w,null,{default:s(()=>[e.show?(y(),v("div",$,[l(I,{title:"Создать вакансию",class:"mx-auto","max-width":"700",variant:"outlined"},{default:s(()=>[l(c,{class:"align-center text-center"},{default:s(()=>[l(k,{ref:"form1",modelValue:e.valid,"onUpdate:modelValue":a[9]||(a[9]=t=>e.valid=t),"lazy-validation":"",onSubmit:S(m.submitForm,["prevent"])},{default:s(()=>[l(n,{modelValue:e.category,"onUpdate:modelValue":[a[0]||(a[0]=t=>e.category=t),a[1]||(a[1]=t=>m.getCategoryId())],label:"Категория*",rules:[e.rules.required],items:e.categories},null,8,["modelValue","rules","items"]),l(n,{modelValue:e.company,"onUpdate:modelValue":[a[2]||(a[2]=t=>e.company=t),a[3]||(a[3]=t=>m.getCompanyId())],label:"Компания*",rules:[e.rules.required],items:e.companies},null,8,["modelValue","rules","items"]),l(p,{modelValue:e.title,"onUpdate:modelValue":a[4]||(a[4]=t=>e.title=t),label:"Название вакансии*",rules:[e.rules.required],"hide-details":"",required:""},null,8,["modelValue","rules"]),l(p,{modelValue:e.description,"onUpdate:modelValue":a[5]||(a[5]=t=>e.description=t),label:"Описание*",rules:[e.rules.required],"hide-details":"",required:""},null,8,["modelValue","rules"]),l(p,{modelValue:e.salary,"onUpdate:modelValue":a[6]||(a[6]=t=>e.salary=t),label:"Заработная плата","hide-details":"",required:""},null,8,["modelValue"]),l(n,{modelValue:e.requirements,"onUpdate:modelValue":a[7]||(a[7]=t=>e.requirements=t),label:"Опыт работы*",rules:[e.rules.required],items:["Не имеет значения","Нет опыта","От 1 года до 3 лет","От 3 до 6 лет","Более 6 лет"]},null,8,["modelValue","rules"]),d(" "+V(e.location)+" ",1),l(n,{modelValue:e.location,"onUpdate:modelValue":a[8]||(a[8]=t=>e.location=t),label:"Местанохождение",rules:[e.rules.required],items:["Минск","Минская область","Брест","Витебск","Гомель","Гродно","Могилев"]},null,8,["modelValue","rules"]),l(g,{class:"mt-5",color:"success",type:"submit",disabled:!e.valid,block:""},{default:s(()=>[d(" Создать вакансию ")]),_:1},8,["disabled"])]),_:1},8,["modelValue","onSubmit"]),l(g,{size:"x-small",variant:"plain"},{default:s(()=>[d(" *Обязательное поле ")]),_:1}),l(C,{modelValue:e.snackbar,"onUpdate:modelValue":a[10]||(a[10]=t=>e.snackbar=t)},{default:s(()=>[d(V(e.snackbarMessage),1)]),_:1},8,["modelValue"])]),_:1})]),_:1})])):q("",!0)]),_:1})]),_:1})}const J=h(U,[["render",M]]);export{J as default};
