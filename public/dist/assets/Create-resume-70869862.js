import{A as p}from"./advert.service-7a9bf382.js";import{V as g}from"./vacancy.service-906fc0e3.js";import{_ as f,o as V,c as y,w as r,n,a as t,i as c,af as b,d as m,b as d,a5 as v,a4 as h}from"./index-a1344df0.js";import{b as k,c as o,V as I}from"./VTextField-a51d04a5.js";import{V as w}from"./VAutocomplete-58e98279.js";import"./lazy-cc59aaa1.js";import"./index-9f9beae4.js";import"./VList-9ab19358.js";import"./VListItem-365efae1.js";import"./VDivider-3035ff69.js";import"./VSlideGroup-10812bc2.js";import"./filter-e86975f2.js";const S={data:()=>({type_of_document:null,title:"",skills:"",salary:"",description:"",categoryId:1,categories:[],category:"",types:["Товарно-транспортная накладная","Товарный раздел","Приходный кассовый ордер","Расходный кассовый ордер","Акт о приеме-передаче основных средств","Акт о приеме-передаче нематериальных активов"],valid:!1,valid2:!1,rules:{required:e=>!!e||"Поле обязательно для заполнения"},snackbar:!1,snackbarMessage:""}),methods:{submitForm(){this.valid&&this.createAdv()},async getCategoryId(e){const i=this.categories.find(s=>s.title==this.category);this.categoryId=i.id},async createAdv(){if(this.title!=null&&this.skills!=null){let e={title:this.title,skills:this.skills,salary:this.salary,description:this.description,categoryId:this.categoryId,jwt:localStorage.getItem("jwt"),creator:localStorage.getItem("email"),modifeir:localStorage.getItem("email"),email:localStorage.getItem("email")},a=await p.createAdvert(e);a.err?(this.snackbar=!0,this.snackbarMessage=a.err):localStorage.getItem("jwt")!=null&&(this.$route.params.nextUrl!=null?this.$router.push(this.$route.params.nextUrl):this.$router.push("/resumes"))}},async loadMyAdverts(){let e={email:localStorage.getItem("email")},a=await g.allVacancies(e);if(a.err)console.log("Empty my_adverts list");else{const i=a.categories.map(s=>({title:s.name,id:s.id}));this.categories=i}}},beforeCreate(){localStorage.getItem("jwt")==null&&this.$router.push("/")},async created(){await this.loadMyAdverts()}};function U(e,a,i,s,q,u){return V(),y(n,null,{default:r(()=>[t(h,{class:"align-center text-center"},{default:r(()=>[t(c,{title:"Создать резюме (общие сведения)",class:"mx-auto","max-width":"700",variant:"outlined"},{default:r(()=>[t(n,{class:"align-center text-center"},{default:r(()=>[t(k,{ref:"form1",modelValue:e.valid,"onUpdate:modelValue":a[6]||(a[6]=l=>e.valid=l),"lazy-validation":"",onSubmit:b(u.submitForm,["prevent"])},{default:r(()=>[t(w,{modelValue:e.category,"onUpdate:modelValue":[a[0]||(a[0]=l=>e.category=l),a[1]||(a[1]=l=>u.getCategoryId())],label:"Категория",rules:[e.rules.required],items:e.categories},null,8,["modelValue","rules","items"]),t(o,{modelValue:e.title,"onUpdate:modelValue":a[2]||(a[2]=l=>e.title=l),label:"Впишите желаемую должность",rules:[e.rules.required],"hide-details":"",required:""},null,8,["modelValue","rules"]),t(o,{modelValue:e.skills,"onUpdate:modelValue":a[3]||(a[3]=l=>e.skills=l),label:"Опишите свои навыки",rules:[e.rules.required],"hide-details":"",required:""},null,8,["modelValue","rules"]),t(o,{modelValue:e.salary,"onUpdate:modelValue":a[4]||(a[4]=l=>e.salary=l),label:"Впишите желаемую заработную плату","hide-details":"",required:""},null,8,["modelValue"]),t(o,{modelValue:e.description,"onUpdate:modelValue":a[5]||(a[5]=l=>e.description=l),label:"о себе","hide-details":"",required:""},null,8,["modelValue"]),t(m,{density:"comfortable",class:"mt-4",color:"success",type:"submit",disabled:!e.valid,block:""},{default:r(()=>[d(" Создать резюме ")]),_:1},8,["disabled"])]),_:1},8,["modelValue","onSubmit"]),t(m,{size:"x-small",variant:"plain"},{default:r(()=>[d(" *Обязательное поле ")]),_:1}),t(I,{modelValue:e.snackbar,"onUpdate:modelValue":a[7]||(a[7]=l=>e.snackbar=l)},{default:r(()=>[d(v(e.snackbarMessage),1)]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}const E=f(S,[["render",U]]);export{E as default};
